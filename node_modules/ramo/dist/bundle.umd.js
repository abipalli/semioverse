!function(n,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports):"function"==typeof define&&define.amd?define(["exports"],r):r((n=n||self).ramo={})}(this,function(n){"use strict";function t(n,r){return{head:n,tail:r}}function e(n){return t(n,u)}function o(n,r){return n===u?r:"function"==typeof n?function(){return o(r,n())}:t(n.head,o(n.tail,r))}var u=null;function r(n){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(n)}function i(n,r,t){return r in n?Object.defineProperty(n,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[r]=t,n}function c(n){return function(n){if(Array.isArray(n)){for(var r=0,t=new Array(n.length);r<n.length;r++)t[r]=n[r];return t}}(n)||function(n){if(Symbol.iterator in Object(n)||"[object Arguments]"===Object.prototype.toString.call(n))return Array.from(n)}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function a(n){return n&&"object"===r(n)&&!w(n)}function f(){return i({},A,!0)}function l(n,r){return r.has(n)?l(r.get(n),r):n}function y(n,r){if(n=l(n,r),a(n)){var t=Object.create(Object.getPrototypeOf(n)),e=!0,o=!1,u=void 0;try{for(var i,c=x(n)[Symbol.iterator]();!(e=(i=c.next()).done);e=!0){var f=i.value;t[f]=y(n[f],r)}}catch(n){o=!0,u=n}finally{try{e||null==c.return||c.return()}finally{if(o)throw u}}return t}return n}function p(n,r){var t;return i(t={},T,n),i(t,_,r),t}function b(n){return n[T]}function s(n){return n[_]}function m(n){return n===k?f():Array.isArray(n)?E(n):a(n)?L(n):n}function v(n){return n===R?[]:q(n)?z(n):a(n)?D(n):n}function d(n,r,t){return(n=l(n,t))===(r=l(r,t))?t:w(n)?N(n,r,t):w(r)?N(r,n,t):!(!a(n)||!a(r))&&F(n,r,t)}function h(n){return e(n)}function S(n){return u}function j(r,t){return function(n){return(n=d(m(r),m(t),n))?e(n):u}}function O(n){var r=function(n){return c(Array(n).keys())}(n.length).map(f);return G(n.apply(void 0,c(r)))}function g(e){return function(){for(var n=arguments.length,r=new Array(n),t=0;t<n;t++)r[t]=arguments[t];return function(n){return function(){return G(e.apply(void 0,r))(n)}}}}var A=Symbol("ramo.VAR"),w=function(n){return n&&"object"===r(n)&&A in n},x=function(n){return[].concat(c(Object.keys(n)),c(Object.getOwnPropertySymbols(n)))},P=function(n,r){return n=l(n,r),w(n)?M(n,r):a(n)?I(n,r):r},M=function(n,r){return new Map(r).set(n,"_".concat(r.size))},I=function(t,n){return x(t).reduce(function(n,r){return P(t[r],n)},n)},R=Symbol("ramo.NIL"),T=Symbol("ramo.FIRST"),_=Symbol("ramo.REST"),k=Symbol("ramo.WILD"),E=function n(r){return 0===r.length?R:p(m(r[0]),n(r.slice(1)))},L=function(n){var r=Object.create(Object.getPrototypeOf(n)),t=!0,e=!1,o=void 0;try{for(var u,i=x(n)[Symbol.iterator]();!(t=(u=i.next()).done);t=!0){var c=u.value;r[c]=m(n[c])}}catch(n){e=!0,o=n}finally{try{t||null==i.return||i.return()}finally{if(e)throw o}}return r},q=function(n){return n&&"object"===r(n)&&T in n&&_ in n},z=function(n){var r=v(b(n)),t=v(s(n));return Array.isArray(t)?[r].concat(c(t)):p(r,t)},D=function(n){var r=Object.create(Object.getPrototypeOf(n)),t=!0,e=!1,o=void 0;try{for(var u,i=x(n)[Symbol.iterator]();!(t=(u=i.next()).done);t=!0){var c=u.value;r[c]=v(n[c])}}catch(n){e=!0,o=n}finally{try{t||null==i.return||i.return()}finally{if(e)throw o}}return r},F=function(t,e,n){return x(e).every(function(n){return n in t})&&x(t).reduce(function(n,r){return n&&r in e&&d(t[r],e[r],n)},n)},N=function(n,r,t){return!V(n,r,t)&&new Map(t).set(n,r)},V=function r(t,e,o){return e=l(e,o),t===e||!!a(e)&&x(e).some(function(n){return r(t,e[n],o)})},W=function(n){return n.reduce(B,S)},B=function(r,t){return function(n){return o(r(n),t(n))}},C=function(r,t){return function(n){return function n(r,t){return t===u?u:"function"==typeof t?function(){return n(r,t())}:o(r(t.head),n(r,t.tail))}(t,r(n))}},G=function(n){return function(n){return n.reduce(C,h)}(function(n){return Array.isArray(n)?n:[n]}(n))},H=g(function(n){return j(n,[])}),J=g(function(n,r,t){return j(t,p(n,r))}),K=g(function(r,t){return O(function(n){return J(t,n,r)})}),Q=g(function(r,t){return O(function(n){return J(n,t,r)})});n.Rel=g,n.conde=function(){for(var n=arguments.length,r=new Array(n),t=0;t<n;t++)r[t]=arguments[t];return W(r.map(G))},n.cons=p,n.conso=J,n.eq=j,n.exist=O,n.failo=S,n.first=b,n.firsto=K,n.nilo=H,n.rest=s,n.resto=Q,n.run=function(n){var e=0<arguments.length&&void 0!==n&&n;return function(n){var r=f(),t=G(n(r,k))(new Map);return function(n,r){for(var t=[];0!==n&&r!==u;)"function"==typeof r?r=r():(t.push(r.head),r=r.tail,!1!==n&&--n);return t}(e,t).map(function(n){return function(n,r){return n=y(n,r),y(n,P(n,new Map))}(r,n)}).map(v)}},n.succeedo=h,Object.defineProperty(n,"__esModule",{value:!0})});
